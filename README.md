# SguWeewx
A skin to produce files &amp; images from [WeeWx](https://weewx.com/) for the [Scottish Gliding Centre's Pilot's Wiki](https://pilots.scottishglidingcentre.co.uk/).

The aim of this skin is to make it as simple as possible to install WeeWx and have it produce the required output in a structure that WeeWx can FTP to the Pilot's Wiki server.

The file & image names, and paths, are all specific to the [SGC Weather Station](https://pilots.scottishglidingcentre.co.uk/weather/weather_station) and [SGC Weather Statistics](https://pilots.scottishglidingcentre.co.uk/weather/weather_stats) pages.

Following the release of WeeWx v5, skins are installed with [weectl](https://weewx.com/docs/5.1/utilities/weectl-extension/) and they can be installed directly from GitHub, without downloading the skin first.

  * Turn off the default ``SeasonsReport`` in the ``[[SeasonsReport]]`` section of ``weewx.conf`` by changing ``enable = true`` to ``enable = false``.
  * The DokuWiki server needs an FTP user that the WeeWx platform use for it's connection. The home directory for that user should be the [DokuWiki data](https://www.dokuwiki.org/devel:dirlayout) directory, which contains the ``media`` and ``pages`` subdirectories.
  * The [FTP](https://weewx.com/docs/usersguide.htm#If_the_server_is_on_a_different_machine) or [RSYNC](https://weewx.com/docs/usersguide.htm#If_the_server_is_on_a_different_machine) section in ``/etc/weewx/weewx.conf`` needs configuring with the correct server, path, user and password.
  * By default ``$HTML_ROOT`` for WeeWx v5 is  ``/var/www/html/weewx``, and this skin places it's output in ``$HTML_ROOT/dokuwiki``. New and altered content is copied from there to the DokuWiki server.
  * No WeeWx configuration beyond that mentioned above should be required beyond any specific changes required for the physical weather station, for example installing and configuring the [GW1000](https://github.com/gjr80/weewx-gw1000) extension.
  * The correct [DokuWiki namespace](https://www.dokuwiki.org/namespaces) for the NOAA files in DokuWiki is ``weather:noaa:``  
  
This skin produces the following pages and images:  

   * ``$HTML_ROOT/dokuwiki/media/weather/daybarometer-sgu-big.png``
   * ``$HTML_ROOT/dokuwiki/media/weather/daybarometer-sgu.png``
   * ``$HTML_ROOT/dokuwiki/media/weather/dayrain-sgu-big.png``
   * ``$HTML_ROOT/dokuwiki/media/weather/dayrain-sgu.png``
   * ``$HTML_ROOT/dokuwiki/media/weather/dayrose.png``
   * ``$HTML_ROOT/dokuwiki/media/weather/dayspiral.png``
   * ``$HTML_ROOT/dokuwiki/media/weather/daytempdew-sgu-big.png``
   * ``$HTML_ROOT/dokuwiki/media/weather/daytempdew-sgu.png``
   * ``$HTML_ROOT/dokuwiki/media/weather/daywind-sgu-big.png``
   * ``$HTML_ROOT/dokuwiki/media/weather/daywind-sgu.png``
   * ``$HTML_ROOT/dokuwiki/pages/weather/noaa/noaa-yyyy-mm.txt - one file per month per year``
   * ``$HTML_ROOT/dokuwiki/pages/weather/noaa/noaa-yyyy.txt - one file per year``
   * ``$HTML_ROOT/dokuwiki/pages/weather/weather_stats_incl.txt``
   * ``$HTML_ROOT/dokuwiki/sguweewx.html``
 
``sguweewx.html`` is a file that can be used to view the images and statistics in a test situation, and which also displays the versions of WeeWx, this skin, and the [PolarWindPlot](https://github.com/gjr80/weewx-polarwindplot) skin.  It is not used by the live system.

``weather_stats_incl.txt`` is a file in [DokuWiki table format](https://www.dokuwiki.org/wiki:syntax#tables) which is [included](https://www.dokuwiki.org/plugin:include) in a DokuWiki page that displays the [most recent Weather Statistics](https://pilots.scottishglidingcentre.co.uk/weather/weather_stats).

The fonts used in the images - ``OpenSans-Bold.ttf`` and ``OpenSans-Regular.ttf`` - are included in the skin. 

The WindRose files are generated by the [PolarWindPlot skin](https://github.com/gjr80/weewx-polarwindplot) which has been included in this skin by kind permission of the [author](https://github.com/gjr80). He also gave a lot of help along the way.
