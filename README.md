# SguWeewx
Bespoke skin to produce files &amp; images from [WeeWx](https://weewx.com/) to go into the [SGU Pilot's Wiki](https://pilots.scottishglidingcentre.co.uk/), which is created using [DokuWiki](https://www.dokuwiki.org/)

The aim of this skin is to make it as simple as possible to install WeeWx and have it produce the required output in a structure that can be copied using FTP to the Pilot's Wiki server.

The file & image names, and paths, are all specific to the [SGC Weather Station](https://pilots.scottishglidingcentre.co.uk/weather/weather_station) and [SGC Weather Statistics](https://pilots.scottishglidingcentre.co.uk/weather/weather_stats) pages.

The skin can be downloaded from https://github.com/swfrx/SguWeewx/releases and is installed in the usual way with ['wee_extension'](https://weewx.com/docs/utilities.htm#wee_extension_utility).  

  * Weewx must be installed with [setup.py](https://weewx.com/docs/setup.htm) into the default location of ``/home/weewx``
  * Turn off the default 'Seasonsreport'
  * The Dokuwiki server needs a user for FTP that the WeeWx platform can connect to, and with a home directory that is the [Dokuwiki data](https://www.dokuwiki.org/devel:dirlayout) directory, which contains the ``media`` and ``pages`` directories
  * The [FTP](https://weewx.com/docs/usersguide.htm#If_the_server_is_on_a_different_machine) or [RSYNC](https://weewx.com/docs/usersguide.htm#If_the_server_is_on_a_different_machine) section needs configuring with the correct server, path, user and password as per the Dokuwiki server.  The home directory should be where the ``dokuwiki`` installation is
  * By default ``$HTML_ROOT`` is ``/home/weewx/public_html/sguweewx``, and this skin places it's output in ``$HTML_ROOT/dokuwiki`` from where new and altered content is copied to the main Dokuwiki server
  * No WeeWx configuration beyond that mentioned above should be required
  * However if you want the output places elsewhere it should still be picked up and copied, and the table for the NOAA files generated

Dokuwiki Notes:
  * The correct namespace for the NOAA files in DokuWiki is ``weather:noaa:``  
  * The name format for NOAA yearly summaries is ``noaa-2[0-9][0-9][0-9].txt``
  
This skin produces the following pages and images:  
$HTML_ROOT/dokuwiki/media/weather/daybarometer-sgu-big.png
$HTML_ROOT/dokuwiki/media/weather/daybarometer-sgu.png
$HTML_ROOT/dokuwiki/media/weather/dayrain-sgu-big.png
$HTML_ROOT/dokuwiki/media/weather/dayrain-sgu.png
$HTML_ROOT/dokuwiki/media/weather/dayrose.png
$HTML_ROOT/dokuwiki/media/weather/dayspiral.png
$HTML_ROOT/dokuwiki/media/weather/daytempdew-sgu-big.png
$HTML_ROOT/dokuwiki/media/weather/daytempdew-sgu.png
$HTML_ROOT/dokuwiki/media/weather/daywind-sgu-big.png
$HTML_ROOT/dokuwiki/media/weather/daywind-sgu.png
$HTML_ROOT/dokuwiki/pages/weather/noaa/noaa-yyyy-mm.txt
$HTML_ROOT/dokuwiki/pages/weather/noaa/noaa-yyyy.txt
$HTML_ROOT/dokuwiki/pages/weather/weather_stats_incl.txt
$HTML_ROOT/dokuwiki/sguweewx.html
 
``sguweewx.html`` is a file that can be used to view the images and statistics in a test situation.  It is not accessed on the live system.

``weather_stats_incl.txt`` is a file in [DokuWiki table format](https://www.dokuwiki.org/wiki:syntax#tables).  It's intended that it is [included](https://www.dokuwiki.org/plugin:include) in a Dokuwiki page to display the most recently generated weather statistics - see [Weather Statistics](https://pilots.scottishglidingcentre.co.uk/weather/weather_stats).

The fonts used in the images - OpenSans-Bold.ttf and OpenSans-Regular.ttf - are included in the skin. 

The WindRose files are generated by the [PolarWindPlot skin](https://github.com/gjr80/weewx-polarwindplot) which has been included in this sking.  Permission was kindly granted by the author, who also gave a lot of help along the way.
